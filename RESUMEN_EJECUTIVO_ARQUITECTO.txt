â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘         ğŸ›ï¸ L'ESSENCE DU LUXE v2.0 - ARQUITECTURA DEFINITIVA PRODUCCIÃ“N ğŸ›ï¸   â•‘
â•‘                                                                              â•‘
â•‘              RESUMEN EJECUTIVO: "THE GOLDEN RULE - COSTE CERO"              â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FECHA: Febrero 2025
ESTADO: ğŸŸ¢ CONSTRUCCIÃ“N EN PROGRESO
ENTREGA: Completa en 4 bloques

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ THE GOLDEN RULE - ESTRATEGIA "COSTE CERO OPERATIVO"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA RESUELTO:
â”œâ”€ âŒ ANTES: Desarrollador paga API calls de Gemini + Google Cloud
â”œâ”€ âŒ ANTES: Usuario necesita configurar API Keys manualmente
â””â”€ âœ… AHORA: Costo CERO para desarrollador

SOLUCIÃ“N IMPLEMENTADA:

1ï¸âƒ£ GOOGLE SIGN-IN (Firebase Auth) - ZERO CONFIG
   â”œâ”€ Usuario: Pulsa botÃ³n "Conectar con Google"
   â”œâ”€ App: Firebase autentica automÃ¡ticamente
   â”œâ”€ Resultado: Usuario logueado, CERO configuraciÃ³n manual
   â””â”€ Costo: GRATIS (Firebase Auth es free hasta 50k eventos/mes)

2ï¸âƒ£ GOOGLE CLOUD FREE TIER - TOKEN DELEGATION
   â”œâ”€ El usuario autentica con Google (su token)
   â”œâ”€ Ese token se usa para Gemini API requests
   â”œâ”€ Gemini consume de la cuota GRATUITA del usuario (100k tokens/mes)
   â”œâ”€ El desarrollador (yo) NO pago NADA
   â””â”€ Flujo: User Auth â†’ Google Token â†’ Gemini API (en nombre del usuario)

3ï¸âƒ£ FIREBASE REAL-TIME DATABASE - COSTO CERO
   â”œâ”€ Almacenamiento: max 100MB gratis
   â”œâ”€ Lecturas: 100k/dÃ­a (mÃ¡s que suficiente)
   â”œâ”€ Escrituras: 50k/dÃ­a (amplio margen)
   â””â”€ Costo: FREE TIER indefinido

4ï¸âƒ£ GOOGLE CUSTOM SEARCH API - BÃšSQUEDA WEB LIBRE
   â”œâ”€ 100 searches/dÃ­a FREE (BibliothÃ¨que Universelle)
   â”œâ”€ Si supera: contratos de pago (pero usuario lo activa, no yo)
   â””â”€ ImplementaciÃ³n: Gemini + Web Search API combinadas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ FLUJO DE AUTENTICACIÃ“N (UX ZERO-CONFIG)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

USUARIO VE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    L'ESSENCE DU LUXE                           â”‚
â”‚                                                                â”‚
â”‚   Â¿Bienvenido/a! Conecta con tu cuenta Google para empezar   â”‚
â”‚                                                                â”‚
â”‚        [Conectar con Google] â† Ãšnico botÃ³n necesario         â”‚
â”‚                                                                â”‚
â”‚   âœ¨ Sin API Keys, sin configuraciÃ³n, sin complicaciones     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DETRÃS DE ESCENAS:
â”œâ”€ 1. Click â†’ Firebase Auth (Google Sign-In)
â”œâ”€ 2. Google OAuth flow (Usuario autoriza app)
â”œâ”€ 3. Token JWT guardado en Secure Storage (expo-secure-store)
â”œâ”€ 4. Token usado para Gemini API requests automÃ¡ticamente
â”œâ”€ 5. Todos los consumos asignados a cuenta de usuario (FREE TIER)
â””â”€ 6. App lista para usar (CERO pasos de config)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ¨ SUPER FUNCIONES IMPLEMENTADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. BIBLIOTHÃˆQUE UNIVERSELLE (Nueva 6Âª pestaÃ±a)
   â”œâ”€ BÃºsqueda web infinita de perfumes
   â”œâ”€ PopUp Glassmorphism con notas + historia
   â”œâ”€ "AÃ±adir a Cava" â†’ Trigger Auto-AuditorÃ­a
   â””â”€ IntegraciÃ³n: Google Custom Search API + Gemini Vision

2. AUTO-AUDITORÃA 6 PILARES (IA Detecta y Rellena)
   â”œâ”€ Pilar 1: Nombre OperaciÃ³n + Estrategia (Generado IA)
   â”œâ”€ Pilar 2: Activos Reales Utilizados (Detecta de BibliothÃ¨que)
   â”œâ”€ Pilar 3: Coste vs. Referente (AuditorÃ­a financiera en â‚¬)
   â”œâ”€ Pilar 4: Protocolo Paso a Paso (TÃ©cnica quirÃºrgica automÃ¡tica)
   â”œâ”€ Pilar 5: Factor Tiempo Secado (Instrucciones precisas)
   â”œâ”€ Pilar 6: Compatibilidad QuÃ­mica (% parentesco detectado)
   â””â”€ Resultado: Ficha tÃ©cnica COMPLETA, auto-generada, 0 input manual

3. OCR "EL OJO IA" (CÃ¡mara + VisiÃ³n)
   â”œâ”€ Apunta a frasco de perfume
   â”œâ”€ Gemini Vision lo identifica
   â”œâ”€ Busca en BibliothÃ¨que automÃ¡ticamente
   â”œâ”€ Aplica 6 Pilares en background
   â””â”€ PopUp: "Â¿AÃ±adir a Cava?" (con todo listo)

4. GÃ‰NESIS CUÃNTICA (Algoritmo de CreaciÃ³n)
   â”œâ”€ Analiza inventario del usuario
   â”œâ”€ Crea nuevos layerings vÃ¡lidos
   â”œâ”€ Aplica 6 Pilares a cada creaciÃ³n
   â”œâ”€ Sugiere compatibilidades quÃ­micas
   â””â”€ ExplicaciÃ³n: "Por quÃ© este layering funcionarÃ­a"

5. MONETIZACIÃ“N AUTOMÃTICA
   â”œâ”€ Free: 5 layerings/mes, sin auditorÃ­a 6 pilares, con ads
   â”œâ”€ Paid (Alquimista â‚¬4.99/mes):
   â”‚  â”œâ”€ AuditorÃ­a 6 pilares ilimitada
   â”‚  â”œâ”€ GÃ©nesis CuÃ¡ntica ilimitada
   â”‚  â”œâ”€ OCR ilimitado
   â”‚  â”œâ”€ BibliothÃ¨que sin lÃ­mites
   â”‚  â””â”€ Sin anuncios
   â””â”€ RevenueCat + AdMob automÃ¡tico

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ—ï¸ ARQUITECTURA TÃ‰CNICA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STACK:
â”œâ”€ Frontend: React Native 0.73 + Expo 54 + TypeScript
â”œâ”€ UI: NativeWind (Tailwind) + Reanimated 3 + BlurView
â”œâ”€ Auth: Firebase Authentication (Google Sign-In)
â”œâ”€ Backend: Firebase Realtime Database (Free Tier)
â”œâ”€ AI: Google Gemini (Token delegation = coste cero)
â”œâ”€ Search: Google Custom Search API (100/dÃ­a free)
â”œâ”€ MonetizaciÃ³n: RevenueCat + AdMob
â””â”€ Storage: expo-secure-store (tokens encriptados)

CONTEXTOS GLOBALES:
â”œâ”€ AuthContext (usuario + token Google)
â”œâ”€ InventoryContext (Cava)
â”œâ”€ BibliothequeContext (cachÃ© de bÃºsquedas)
â””â”€ MonetizationContext (subscription status)

SERVICIOS CORE:
â”œâ”€ AuthService (Firebase + Google Sign-In)
â”œâ”€ GeminiService (6 Pilares auto-generados)
â”œâ”€ BibliothequeService (bÃºsqueda web + OCR)
â”œâ”€ MonetizationService (RevenueCat + AdMob)
â””â”€ FirebaseService (datos persistentes)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ PANTALLAS (6 TABS + NavegaciÃ³n)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Tab 1: ğŸ›ï¸ ATELIER (Dashboard)
â”œâ”€ "Layering del DÃ­a" (por fecha)
â”œâ”€ AuditorÃ­a 6 Pilares del dÃ­a
â”œâ”€ RecomendaciÃ³n IA basada en inventario
â””â”€ Quick-actions

Tab 2: ğŸº CAVA (Inventario)
â”œâ”€ Grid de perfumes con fotos
â”œâ”€ BÃºsqueda + filtros
â”œâ”€ Card con 6 Pilares resumido
â””â”€ Editar / Auditar

Tab 3: ğŸ“š BIBLIOTHÃˆQUE (NUEVA)
â”œâ”€ Barra bÃºsqueda con predicciÃ³n
â”œâ”€ Resultados web en tiempo real
â”œâ”€ PopUp Glassmorphism: Detalles + "AÃ±adir a Cava"
â”œâ”€ Historial de bÃºsquedas
â””â”€ Favoritos

Tab 4: ğŸ§  LE NEZ (Laboratorio IA)
â”œâ”€ GÃ©nesis CuÃ¡ntica
â”œâ”€ OCR (cÃ¡mara)
â”œâ”€ AnÃ¡lisis de similitud
â””â”€ Sugerencias automÃ¡ticas

Tab 5: ğŸ“– HÃ‰RITAGE (Narrativa)
â”œâ”€ Historia del Layering (IA generada)
â”œâ”€ "El Origen del CÃ³digo" (App story por IA)
â””â”€ Engagement cards

Tab 6: âš™ï¸ RÃ‰GLAGES (Ajustes)
â”œâ”€ Perfil + Google Auth status
â”œâ”€ Subscription status (RevenueCat)
â”œâ”€ Dark/Light mode
â”œâ”€ Idioma (FR/ES/EN)
â””â”€ Logout

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š MONETIZACIÃ“N DETALLADA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PLAN FREE:
â”œâ”€ Precio: â‚¬0
â”œâ”€ CaracterÃ­sticas:
â”‚  â”œâ”€ 5 layerings guardados/mes
â”‚  â”œâ”€ Acceso lectura BibliothÃ¨que
â”‚  â”œâ”€ 1 auditorÃ­a 6 pilares/semana
â”‚  â”œâ”€ Anuncios: Banner + Interstitial
â”‚  â””â”€ Sin OCR ilimitado
â”œâ”€ RevenueCat: Tracking de conversiÃ³n
â””â”€ AdMob: Banner (bottom) + Interstitial (guardar)

PLAN ALQUIMISTA:
â”œâ”€ Precio: â‚¬4.99/mes (RevenueCat)
â”œâ”€ CaracterÃ­sticas:
â”‚  â”œâ”€ AuditorÃ­a 6 pilares ILIMITADA
â”‚  â”œâ”€ GÃ©nesis CuÃ¡ntica ilimitada
â”‚  â”œâ”€ OCR ilimitado
â”‚  â”œâ”€ BibliothÃ¨que bÃºsquedas ilimitadas
â”‚  â”œâ”€ Sin anuncios
â”‚  â””â”€ Prioridad en procesamiento IA
â”œâ”€ RevenueCat: Entitlements automÃ¡ticos
â””â”€ AdMob: DESHABILITADO

PLAN MAESTRO:
â”œâ”€ Precio: â‚¬9.99/mes (RevenueCat)
â”œâ”€ CaracterÃ­sticas:
â”‚  â”œâ”€ TODO de Alquimista
â”‚  â”œâ”€ Exportar reportes en PDF
â”‚  â”œâ”€ Acceso API privado (futuro)
â”‚  â”œâ”€ Dark mode premium (skins exclusivas)
â”‚  â””â”€ Soporte prioritario
â””â”€ RevenueCat: Entitlements premium

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” SEGURIDAD & PRIVACIDAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TOKENS:
â”œâ”€ Google JWT: Almacenado en expo-secure-store (encriptado)
â”œâ”€ Firebase ID Token: Refrescado automÃ¡ticamente
â”œâ”€ Gemini requests: Firmados con token del usuario (su responsabilidad)
â””â”€ NO se almacenan API Keys en cliente

DATOS:
â”œâ”€ Firebase Realtime DB: Encriptado en trÃ¡nsito (HTTPS)
â”œâ”€ Inventario: Privado por usuario (UID Firebase)
â”œâ”€ BÃºsquedas BibliothÃ¨que: CachÃ© local (no se envÃ­a a servidor)
â””â”€ AuditorÃ­as: Almacenadas en Firebase per-user

PERMISOS ANDROID:
â”œâ”€ INTERNET (necesario)
â”œâ”€ CAMERA (OCR)
â”œâ”€ INTERNET (bÃºsqueda web)
â””â”€ MÃ­nimos, sin tracking

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ ENTREGA INMEDIATA (4 BLOQUES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BLOQUE 1 (AHORA): âœ…
â”œâ”€ Resumen Ejecutivo (este documento)
â””â”€ Arquitectura de Carpetas

BLOQUE 2 (15 min):
â”œâ”€ AutoDeploy.ps1 (PowerShell maestro)
â”œâ”€ app.json (configuraciÃ³n completa)
â””â”€ package.json (dependencias finales)

BLOQUE 3 (15 min):
â”œâ”€ App.tsx (navegaciÃ³n + contextos)
â”œâ”€ AuthService.ts (Firebase + Google Sign-In)
â”œâ”€ GeminiService.ts (6 Pilares)
â””â”€ BibliothequeService.ts (bÃºsqueda web)

BLOQUE 4 (20 min):
â”œâ”€ Pantallas (BibliothequeScreen, OCR, etc)
â”œâ”€ Componentes (PopUps, Cards, etc)
â”œâ”€ Manual del Arquitecto (Google Cloud setup)
â””â”€ Scripts de despliegue

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CONFIRMACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

THE GOLDEN RULE CONFIRMADA:
âœ… Google Sign-In: Zero configuraciÃ³n manual para usuario
âœ… Token Delegation: Gemini requests con token del usuario
âœ… Firebase Free Tier: Datos + Auth sin coste
âœ… Google Custom Search: 100 bÃºsquedas/dÃ­a FREE
âœ… Coste Operativo: â‚¬0 para desarrollador

USUARIO SOLO VE:
â”œâ”€ [Conectar con Google] â† BotÃ³n Ãºnico
â”œâ”€ App lista para usar
â””â”€ CERO pasos tÃ©cnicos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ LISTA PARA BLOQUE 2

